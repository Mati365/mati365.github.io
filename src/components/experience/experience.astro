---
import { COMPANIES } from "~/data/experience";
import JobItem from "./job-item.astro";
import ExpandableSection from '../shared/expandable-section.astro';

const sortedCompanies = COMPANIES.sort((a, b) =>
  (b.duration.end?.getTime() ?? Date.now()) - (a.duration.end?.getTime() ?? Date.now())
);
---

<section class="lg:mt-6 lg:pt-4">
  <h2 class="flex md:flex-row flex-col gap-2 mb-8 font-semibold text-2xl text-gray-900">
    ðŸŒŸ Experience & Roles
    <span class="font-normal text-base text-gray-500">What I did in tech?</span>
  </h2>

  <ExpandableSection maxHeight={1400} id="experience-section">
    <div class="space-y-8">
      {sortedCompanies.map((company) => (
        <JobItem job={company} />
      ))}
    </div>
  </ExpandableSection>
</section>
